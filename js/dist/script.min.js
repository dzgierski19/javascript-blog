"use strict";var templates={articleLink:Handlebars.compile(document.querySelector("#template-article-link").innerHTML),tagLink:Handlebars.compile(document.querySelector("#template-tag-link").innerHTML),authorLink:Handlebars.compile(document.querySelector("#template-author-link").innerHTML),tagCloudLink:Handlebars.compile(document.querySelector("#template-tag-cloud-link").innerHTML),authorCloudLink:Handlebars.compile(document.querySelector("#template-author-cloud-link").innerHTML)},titleClickHandler=function(t){t.preventDefault();var e=document.querySelectorAll(".titles a.active"),r=!0,a=!1,l=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){n.value.classList.remove("active")}}catch(t){a=!0,l=t}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}this.classList.add("active");var i=document.querySelectorAll(".posts article.post.active"),c=!0,u=!1,s=void 0;try{for(var d,v=i[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){d.value.classList.remove("active")}}catch(t){u=!0,s=t}finally{try{c||null==v.return||v.return()}finally{if(u)throw s}}var y=this.getAttribute("href");document.querySelector(y).classList.add("active")},optArticleSelector=".post",optTitleSelector=".post-title",optTitleListSelector=".titles",optArticleTagsSelector=".post-tags .list",optArticleAuthorSelector=".post-author",optCloudClassCount=5,generateTitleLinks=function(t){var e=0<arguments.length&&void 0!==t?t:"",r=document.querySelector(optTitleListSelector);r.innerHTML="";var a=document.querySelectorAll(optArticleSelector+e),l="",n=!0,o=!1,i=void 0;try{for(var c,u=a[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var s=c.value,d={id:s.getAttribute("id"),title:s.querySelector(optTitleSelector).innerHTML};l+=templates.articleLink(d)}}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}r.innerHTML=l;var v=document.querySelectorAll(".titles a"),y=!0,f=!1,m=void 0;try{for(var h,S=v[Symbol.iterator]();!(y=(h=S.next()).done);y=!0){h.value.addEventListener("click",titleClickHandler)}}catch(t){f=!0,m=t}finally{try{y||null==S.return||S.return()}finally{if(f)throw m}}};generateTitleLinks();var calculateTagsParams=function(t){var e={max:0,min:999999};for(var r in t)e.max=Math.max(t[r],e.max),e.min=Math.min(t[r],e.min);return e},calculateTagClass=function(t,e){var r=(t-e.min)/(e.max-e.min);return Math.floor(r*(optCloudClassCount-1)+1)},generateTags=function(){var t={},e=document.querySelectorAll(optArticleSelector),r=!0,a=!1,l=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var i=n.value,c=i.querySelector(optArticleTagsSelector),u="",s=i.getAttribute("data-tags").split(" "),d=!0,v=!1,y=void 0;try{for(var f,m=s[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var h=f.value,S={id:h,title:h};u+=templates.tagLink(S),t.hasOwnProperty(h)?t[h]++:t[h]=1}}catch(t){v=!0,y=t}finally{try{d||null==m.return||m.return()}finally{if(v)throw y}}c.innerHTML=u}}catch(t){a=!0,l=t}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}var p=document.querySelector(".tags"),L=calculateTagsParams(t),g={tags:[]};for(var A in t)g.tags.push({tag:A,count:t[A],className:calculateTagClass(t[A],L)});p.innerHTML=templates.tagCloudLink(g)};generateTags();var tagClickHandler=function(t){t.preventDefault();var e=this.getAttribute("href"),r=e.replace("#tag-",""),a=document.querySelectorAll('a.active[href^="#tag-"]'),l=!0,n=!1,o=void 0;try{for(var i,c=a[Symbol.iterator]();!(l=(i=c.next()).done);l=!0){i.value.classList.remove("active")}}catch(t){n=!0,o=t}finally{try{l||null==c.return||c.return()}finally{if(n)throw o}}var u=document.querySelectorAll('a[href="'+e+'"]'),s=!0,d=!1,v=void 0;try{for(var y,f=u[Symbol.iterator]();!(s=(y=f.next()).done);s=!0){y.value.classList.add("active")}}catch(t){d=!0,v=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw v}}generateTitleLinks('[data-tags~="'+r+'"]'),console.log(generateTitleLinks)},addClickListenersToTags=function(){var t=document.querySelectorAll('a[href^="#tag-"]'),e=!0,r=!1,a=void 0;try{for(var l,n=t[Symbol.iterator]();!(e=(l=n.next()).done);e=!0){l.value.addEventListener("click",tagClickHandler)}}catch(t){r=!0,a=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw a}}};addClickListenersToTags();var calculateAuthorsParams=function(t){var e={max:0,min:999999};for(var r in t)e.max=Math.max(t[r],e.max),e.min=Math.min(t[r],e.min);return e},calculateAuthorClass=function(t,e){var r=(t-e.min)/(e.max-e.min);return Math.floor(r*(optCloudClassCount-1)+1)},generateAuthors=function(){var t={},e=document.querySelectorAll(optArticleSelector),r=!0,a=!1,l=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var i=n.value,c=i.querySelector(optArticleAuthorSelector),u="",s=i.getAttribute("data-author"),d={id:s,title:s};u+=templates.authorLink(d),t.hasOwnProperty(s)?t[s]++:t[s]=1,c.innerHTML=u}}catch(t){a=!0,l=t}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}var v=document.querySelector(".authors"),y=calculateAuthorsParams(t),f={authors:[]};for(var m in t)f.authors.push({author:m,count:t[m],className:calculateAuthorClass(t[m],y)});v.innerHTML=templates.authorCloudLink(f)};generateAuthors();var authorClickHandler=function(t){t.preventDefault();var e=this.getAttribute("href"),r=e.replace("#author-",""),a=document.querySelectorAll('a.active[href^="#author-"]'),l=!0,n=!1,o=void 0;try{for(var i,c=a[Symbol.iterator]();!(l=(i=c.next()).done);l=!0){i.value.classList.remove("active")}}catch(t){n=!0,o=t}finally{try{l||null==c.return||c.return()}finally{if(n)throw o}}var u=document.querySelectorAll('a[href="'+e+'"]'),s=!0,d=!1,v=void 0;try{for(var y,f=u[Symbol.iterator]();!(s=(y=f.next()).done);s=!0){y.value.classList.add("active")}}catch(t){d=!0,v=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw v}}generateTitleLinks('[data-author="'+r+'"]')},addClickListenersToAuthors=function(){var t=document.querySelectorAll('a[href^="#author"]'),e=!0,r=!1,a=void 0;try{for(var l,n=t[Symbol.iterator]();!(e=(l=n.next()).done);e=!0){l.value.addEventListener("click",authorClickHandler)}}catch(t){r=!0,a=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw a}}};addClickListenersToAuthors();var allPostRefreshArticleList=document.getElementById("all-posts");allPostRefreshArticleList.addEventListener("click",function(){generateTitleLinks()});
//# sourceMappingURL=script.min.js.map
